- meta title: @metering_point.long_name


= content_for :aside do
  %aside#aside-container
    #aside
      .nano
        .nano-content{:tabindex => "0"}
          .text-center.pad-all
            .pad-ver
              %span.fa-stack.fa-lg.fa-5x
                %i.fa.fa-circle.fa-stack-2x
                %i.fa.fa-bolt.fa-stack-1x.fa-inverse
            %h4.text-lg.text-overflow.mar-no= @metering_point.long_name

          - if @meter
            %hr
              %ul.list-group.bg-trans
                %li.list-group-item.list-item-sm
                  %i.fa.fa-tachometer.fa-fw
                  = link_to @meter.name, @meter

          %hr
            .text-center.clearfix
              .col-xs-6
                %p.h3= @users.count
                %small.text-muted= t'residents'
              .col-xs-6
                %p.h3= @devices.count
                %small.text-muted= t'devices'
          %hr
            .text-center.clearfix
              - if current_user.can_update?(@metering_point)
                = @metering_point.link_to_edit




#page-content


  .row
    = render @metering_point.register

  .row
    .col-sm-12.col-md-12.col-lg-12.metering_point_detail{id: "metering_point_#{@metering_point.id}"}
      .panel
        .panel-body.panel-colorful{class: "panel-#{@metering_point.mode_class}"}
          .chart{id: "chart-container-#{@metering_point.id}", style: "width: 100%; height: 300px;"}
          .pad-all
            .btn.btn-success.btn-chart-prev=t('prev')
            .btn.btn-success.btn-chart-zoomout=t('zoom_out')
            .btn.btn-success.btn-chart-next.pull-right=t('next')





  %hr
  %h1.page-header.text-overflow= t'devices' if current_user.can_update?(@metering_point) || @devices.size != 0
  .row
    .devices
      = render @devices

    - if current_user.can_update?(@metering_point)
      .row
        .col-lg-12.text-center
          = @metering_point.edit_devices



  %hr
  %h1.page-header.text-overflow= t'members' if current_user.can_update?(@metering_point) || @users.size != 0
  .row
    - @users.each do |user|
      = render user.profile

    - if current_user.can_update?(@metering_point)
      .row
        .col-lg-12.text-center
          = @metering_point.edit_users


  %hr
  - if current_user.can_update?(@metering_point)
    %h1.page-header.text-overflow= t'address'
    .row
      .addresses
        = render @metering_point.address if @metering_point.address

    - if @metering_point.address.nil?
      .row
        .col-lg-12.text-center
          = @metering_point.new_address



  %hr
  - if current_user.can_update?(@metering_point)
    %h1.page-header.text-overflow= t'meters'
    .row
      .meters
        = render @metering_point.meter if @metering_point.meter

    - if @metering_point.meter.nil?
      .row
        .col-lg-12.text-center
          = @metering_point.new_meter



  %hr
  %h1.page-header.text-overflow= t'contracts'
  .row
    .contracts
      = render @metering_point.contracts

  - if current_user.can_update?(@metering_point)
    .row
      .col-lg-12.text-center
        = @metering_point.new_contract






